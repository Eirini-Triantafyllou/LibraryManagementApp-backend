[19-12-2025 18:38:22 INF] User profile is available. Using 'C:\Users\irene\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest. 
 [19-12-2025 18:38:22 INF] Creating key {acf95360-e92e-4deb-9277-7872f3947ccc} with creation date 2025-12-19 16:38:22Z, activation date 2025-12-21 15:37:00Z, and expiration date 2026-03-19 16:38:22Z. 
 [19-12-2025 18:38:22 INF] Writing data to file 'C:\Users\irene\AppData\Local\ASP.NET\DataProtection-Keys\key-acf95360-e92e-4deb-9277-7872f3947ccc.xml'. 
 [19-12-2025 18:38:22 INF] Now listening on: https://localhost:5001 
 [19-12-2025 18:38:22 INF] Now listening on: http://localhost:5000 
 [19-12-2025 18:38:23 INF] Application started. Press Ctrl+C to shut down. 
 [19-12-2025 18:38:23 INF] Hosting environment: Development 
 [19-12-2025 18:38:23 INF] Content root path: C:\Users\irene\source\repos\LibraryManagementApp\LibraryManagementApp 
 [19-12-2025 18:38:25 INF] Request starting HTTP/2 GET https://localhost:5001/swagger/index.html - null null 
 [19-12-2025 18:38:26 INF] Request finished HTTP/2 GET https://localhost:5001/swagger/index.html - 200 null text/html;charset=utf-8 544.8221ms 
 [19-12-2025 18:38:26 INF] Request starting HTTP/2 GET https://localhost:5001/_framework/aspnetcore-browser-refresh.js - null null 
 [19-12-2025 18:38:26 INF] Request starting HTTP/2 GET https://localhost:5001/_vs/browserLink - null null 
 [19-12-2025 18:38:26 INF] Request finished HTTP/2 GET https://localhost:5001/_framework/aspnetcore-browser-refresh.js - 200 16525 application/javascript; charset=utf-8 17.8682ms 
 [19-12-2025 18:38:26 INF] Request finished HTTP/2 GET https://localhost:5001/_vs/browserLink - 200 null text/javascript; charset=UTF-8 166.2551ms 
 [19-12-2025 18:38:26 INF] Request starting HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - null null 
 [19-12-2025 18:38:26 INF] Request finished HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 49.8798ms 
 [19-12-2025 18:39:40 INF] Request starting HTTP/2 POST https://localhost:5001/api/Users/SignUpUserReader - application/json 261 
 [19-12-2025 18:39:40 INF] CORS policy execution failed. 
 [19-12-2025 18:39:40 INF] Request origin https://localhost:5001 does not have permission to access the resource. 
 [19-12-2025 18:39:40 INF] Executing endpoint 'LibraryManagementApp.Controllers.UsersController.SignUpUserReader (LibraryManagementApp)' 
 [19-12-2025 18:39:40 INF] Route matched with {action = "SignUpUserReader", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[LibraryManagementApp.DTO.UserReadOnlyDTO]] SignUpUserReader(LibraryManagementApp.DTO.ReaderSignupDTO) on controller LibraryManagementApp.Controllers.UsersController (LibraryManagementApp). 
 [19-12-2025 18:39:41 WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license. 
 [19-12-2025 18:39:44 INF] Executed DbCommand (125ms) [Parameters=[@__username_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[DeletedAt], [u].[Email], [u].[Firstname], [u].[InsertedAt], [u].[IsDeleted], [u].[Lastname], [u].[ModifiedAt], [u].[Password], [u].[UserRole], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__username_0 
 [19-12-2025 18:39:44 INF] Signup request for: nikos, Email: nikos@gmail.com 
 [19-12-2025 18:39:44 INF] Extracted user. Role will be: "Reader" 
 [19-12-2025 18:39:45 INF] Password encrypted 
 [19-12-2025 18:39:45 INF] Executed DbCommand (12ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 100), @p2='?' (Size = 255), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Boolean), @p5='?' (Size = 255), @p6='?' (Size = 60), @p7='?' (Size = 20), @p8='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([DeletedAt], [Email], [Firstname], [InsertedAt], [IsDeleted], [Lastname], [Password], [UserRole], [Username])
OUTPUT INSERTED.[Id], INSERTED.[ModifiedAt]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8); 
 [19-12-2025 18:39:46 INF] âœ… User saved with ID: 19 
 [19-12-2025 18:39:46 INF] Creating reader with UserId: 19 
 [19-12-2025 18:39:46 INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (Size = 500), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (Size = 100), @p4='?' (Size = 255), @p5='?' (DbType = DateTime2), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = DateTime2), @p10='?' (Size = 20), @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Readers] ([Address], [BooksBorrowedCount], [DeletedAt], [Email], [FullName], [InsertedAt], [IsActive], [IsDeleted], [LibrarianId], [MembershipDate], [PhoneNumber], [UserId])
OUTPUT INSERTED.[Id], INSERTED.[ModifiedAt]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11); 
 [19-12-2025 18:39:46 ERR] An exception occurred in the database while saving changes for context type 'LibraryManagementApp.Data.LibraryAppDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Email', table 'LibraryApiDev.dbo.Readers'; column does not allow nulls. INSERT fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:78ea5314-27bb-4fc4-81bd-586aebefc228
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken) 
 Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Email', table 'LibraryApiDev.dbo.Readers'; column does not allow nulls. INSERT fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:78ea5314-27bb-4fc4-81bd-586aebefc228
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
[19-12-2025 18:39:46 ERR] ? SIGNUP FAILED: An error occurred while saving the entity changes. See the inner exception for details. 
 Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Email', table 'LibraryApiDev.dbo.Readers'; column does not allow nulls. INSERT fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:78ea5314-27bb-4fc4-81bd-586aebefc228
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at LibraryManagementApp.Repositories.UnitOfWork.SaveAsync() in C:\Users\irene\source\repos\LibraryManagementApp\LibraryManagementApp\Repositories\UnitOfWork.cs:line 26
   at LibraryManagementApp.Services.ReaderService.SignUpUserReaderAsync(ReaderSignupDTO request) in C:\Users\irene\source\repos\LibraryManagementApp\LibraryManagementApp\Services\ReaderService.cs:line 103
[19-12-2025 18:39:46 INF] Executed action LibraryManagementApp.Controllers.UsersController.SignUpUserReader (LibraryManagementApp) in 6386.0933ms 
 [19-12-2025 18:39:46 INF] Executed endpoint 'LibraryManagementApp.Controllers.UsersController.SignUpUserReader (LibraryManagementApp)' 
 [19-12-2025 18:39:47 ERR] Exception at /api/Users/SignUpUserReader POST by Anonymous | Trace=0HNHV3K3CETOD:00000001 
 [19-12-2025 18:39:47 INF] Request finished HTTP/2 POST https://localhost:5001/api/Users/SignUpUserReader - 500 null application/json 6977.168ms 
 [19-12-2025 18:40:07 INF] Request starting HTTP/2 POST https://localhost:5001/api/Users/SignUpUserReader - application/json 261 
 [19-12-2025 18:40:07 INF] CORS policy execution failed. 
 [19-12-2025 18:40:07 INF] Request origin https://localhost:5001 does not have permission to access the resource. 
 [19-12-2025 18:40:07 INF] Executing endpoint 'LibraryManagementApp.Controllers.UsersController.SignUpUserReader (LibraryManagementApp)' 
 [19-12-2025 18:40:07 INF] Route matched with {action = "SignUpUserReader", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[LibraryManagementApp.DTO.UserReadOnlyDTO]] SignUpUserReader(LibraryManagementApp.DTO.ReaderSignupDTO) on controller LibraryManagementApp.Controllers.UsersController (LibraryManagementApp). 
 [19-12-2025 18:40:07 INF] Executed DbCommand (3ms) [Parameters=[@__username_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[DeletedAt], [u].[Email], [u].[Firstname], [u].[InsertedAt], [u].[IsDeleted], [u].[Lastname], [u].[ModifiedAt], [u].[Password], [u].[UserRole], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__username_0 
 [19-12-2025 18:40:07 INF] Executed action LibraryManagementApp.Controllers.UsersController.SignUpUserReader (LibraryManagementApp) in 340.6232ms 
 [19-12-2025 18:40:07 INF] Executed endpoint 'LibraryManagementApp.Controllers.UsersController.SignUpUserReader (LibraryManagementApp)' 
 [19-12-2025 18:40:07 ERR] EntityAlreadyExistsException at /api/Users/SignUpUserReader POST by Anonymous | Trace=0HNHV3K3CETOD:00000003 
 [19-12-2025 18:40:07 INF] Request finished HTTP/2 POST https://localhost:5001/api/Users/SignUpUserReader - 400 null application/json 476.9031ms 
 [19-12-2025 18:40:28 INF] Request starting HTTP/2 POST https://localhost:5001/api/Users/SignUpUserReader - application/json 259 
 [19-12-2025 18:40:28 INF] CORS policy execution failed. 
 [19-12-2025 18:40:28 INF] Request origin https://localhost:5001 does not have permission to access the resource. 
 [19-12-2025 18:40:28 INF] Executing endpoint 'LibraryManagementApp.Controllers.UsersController.SignUpUserReader (LibraryManagementApp)' 
 [19-12-2025 18:40:28 INF] Route matched with {action = "SignUpUserReader", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[LibraryManagementApp.DTO.UserReadOnlyDTO]] SignUpUserReader(LibraryManagementApp.DTO.ReaderSignupDTO) on controller LibraryManagementApp.Controllers.UsersController (LibraryManagementApp). 
 [19-12-2025 18:40:28 INF] Executed DbCommand (6ms) [Parameters=[@__username_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[DeletedAt], [u].[Email], [u].[Firstname], [u].[InsertedAt], [u].[IsDeleted], [u].[Lastname], [u].[ModifiedAt], [u].[Password], [u].[UserRole], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__username_0 
 [19-12-2025 18:40:28 INF] Signup request for: nick, Email: nikos@gmail.com 
 [19-12-2025 18:40:28 INF] Extracted user. Role will be: "Reader" 
 [19-12-2025 18:40:28 INF] Password encrypted 
 [19-12-2025 18:40:28 INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 100), @p2='?' (Size = 255), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Boolean), @p5='?' (Size = 255), @p6='?' (Size = 60), @p7='?' (Size = 20), @p8='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([DeletedAt], [Email], [Firstname], [InsertedAt], [IsDeleted], [Lastname], [Password], [UserRole], [Username])
OUTPUT INSERTED.[Id], INSERTED.[ModifiedAt]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8); 
 [19-12-2025 18:40:28 ERR] An exception occurred in the database while saving changes for context type 'LibraryManagementApp.Data.LibraryAppDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert duplicate key row in object 'dbo.Users' with unique index 'IX_Users_Email'. The duplicate key value is (nikos@gmail.com).
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:78ea5314-27bb-4fc4-81bd-586aebefc228
Error Number:2601,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken) 
 Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert duplicate key row in object 'dbo.Users' with unique index 'IX_Users_Email'. The duplicate key value is (nikos@gmail.com).
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:78ea5314-27bb-4fc4-81bd-586aebefc228
Error Number:2601,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
[19-12-2025 18:40:29 ERR] ? SIGNUP FAILED: An error occurred while saving the entity changes. See the inner exception for details. 
 Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert duplicate key row in object 'dbo.Users' with unique index 'IX_Users_Email'. The duplicate key value is (nikos@gmail.com).
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:78ea5314-27bb-4fc4-81bd-586aebefc228
Error Number:2601,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at LibraryManagementApp.Repositories.UnitOfWork.SaveAsync() in C:\Users\irene\source\repos\LibraryManagementApp\LibraryManagementApp\Repositories\UnitOfWork.cs:line 26
   at LibraryManagementApp.Services.ReaderService.SignUpUserReaderAsync(ReaderSignupDTO request) in C:\Users\irene\source\repos\LibraryManagementApp\LibraryManagementApp\Services\ReaderService.cs:line 91
[19-12-2025 18:40:29 INF] Executed action LibraryManagementApp.Controllers.UsersController.SignUpUserReader (LibraryManagementApp) in 951.2431ms 
 [19-12-2025 18:40:29 INF] Executed endpoint 'LibraryManagementApp.Controllers.UsersController.SignUpUserReader (LibraryManagementApp)' 
 [19-12-2025 18:40:29 ERR] Exception at /api/Users/SignUpUserReader POST by Anonymous | Trace=0HNHV3K3CETOD:00000005 
 [19-12-2025 18:40:29 INF] Request finished HTTP/2 POST https://localhost:5001/api/Users/SignUpUserReader - 500 null application/json 1127.3081ms 
 [19-12-2025 18:41:56 INF] Request starting HTTP/2 POST https://localhost:5001/api/Users/SignUpUserReader - application/json 259 
 [19-12-2025 18:41:56 INF] CORS policy execution failed. 
 [19-12-2025 18:41:56 INF] Request origin https://localhost:5001 does not have permission to access the resource. 
 [19-12-2025 18:41:56 INF] Executing endpoint 'LibraryManagementApp.Controllers.UsersController.SignUpUserReader (LibraryManagementApp)' 
 [19-12-2025 18:41:56 INF] Route matched with {action = "SignUpUserReader", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[LibraryManagementApp.DTO.UserReadOnlyDTO]] SignUpUserReader(LibraryManagementApp.DTO.ReaderSignupDTO) on controller LibraryManagementApp.Controllers.UsersController (LibraryManagementApp). 
 [19-12-2025 18:41:56 INF] Executed DbCommand (9ms) [Parameters=[@__username_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[DeletedAt], [u].[Email], [u].[Firstname], [u].[InsertedAt], [u].[IsDeleted], [u].[Lastname], [u].[ModifiedAt], [u].[Password], [u].[UserRole], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__username_0 
 [19-12-2025 18:41:56 INF] Signup request for: nick, Email: nikos@gmail.com 
 [19-12-2025 18:41:56 INF] Extracted user. Role will be: "Reader" 
 [19-12-2025 18:41:57 INF] Password encrypted 
 [19-12-2025 18:41:57 INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 100), @p2='?' (Size = 255), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Boolean), @p5='?' (Size = 255), @p6='?' (Size = 60), @p7='?' (Size = 20), @p8='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([DeletedAt], [Email], [Firstname], [InsertedAt], [IsDeleted], [Lastname], [Password], [UserRole], [Username])
OUTPUT INSERTED.[Id], INSERTED.[ModifiedAt]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8); 
 [19-12-2025 18:41:57 ERR] An exception occurred in the database while saving changes for context type 'LibraryManagementApp.Data.LibraryAppDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert duplicate key row in object 'dbo.Users' with unique index 'IX_Users_Email'. The duplicate key value is (nikos@gmail.com).
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:78ea5314-27bb-4fc4-81bd-586aebefc228
Error Number:2601,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken) 
 Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert duplicate key row in object 'dbo.Users' with unique index 'IX_Users_Email'. The duplicate key value is (nikos@gmail.com).
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:78ea5314-27bb-4fc4-81bd-586aebefc228
Error Number:2601,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
[19-12-2025 18:41:57 ERR] ? SIGNUP FAILED: An error occurred while saving the entity changes. See the inner exception for details. 
 Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert duplicate key row in object 'dbo.Users' with unique index 'IX_Users_Email'. The duplicate key value is (nikos@gmail.com).
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:78ea5314-27bb-4fc4-81bd-586aebefc228
Error Number:2601,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at LibraryManagementApp.Repositories.UnitOfWork.SaveAsync() in C:\Users\irene\source\repos\LibraryManagementApp\LibraryManagementApp\Repositories\UnitOfWork.cs:line 26
   at LibraryManagementApp.Services.ReaderService.SignUpUserReaderAsync(ReaderSignupDTO request) in C:\Users\irene\source\repos\LibraryManagementApp\LibraryManagementApp\Services\ReaderService.cs:line 91
[19-12-2025 18:41:57 INF] Executed action LibraryManagementApp.Controllers.UsersController.SignUpUserReader (LibraryManagementApp) in 895.375ms 
 [19-12-2025 18:41:57 INF] Executed endpoint 'LibraryManagementApp.Controllers.UsersController.SignUpUserReader (LibraryManagementApp)' 
 [19-12-2025 18:41:57 ERR] Exception at /api/Users/SignUpUserReader POST by Anonymous | Trace=0HNHV3K3CETOD:00000007 
 [19-12-2025 18:41:57 INF] Request finished HTTP/2 POST https://localhost:5001/api/Users/SignUpUserReader - 500 null application/json 1120.225ms 
 [19-12-2025 18:44:52 INF] User profile is available. Using 'C:\Users\irene\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest. 
 [19-12-2025 18:44:53 INF] Now listening on: https://localhost:5001 
 [19-12-2025 18:44:53 INF] Now listening on: http://localhost:5000 
 [19-12-2025 18:44:53 INF] Application started. Press Ctrl+C to shut down. 
 [19-12-2025 18:44:53 INF] Hosting environment: Development 
 [19-12-2025 18:44:53 INF] Content root path: C:\Users\irene\source\repos\LibraryManagementApp\LibraryManagementApp 
 [19-12-2025 18:44:54 INF] Request starting HTTP/2 GET https://localhost:5001/swagger/index.html - null null 
 [19-12-2025 18:44:55 INF] Request finished HTTP/2 GET https://localhost:5001/swagger/index.html - 200 null text/html;charset=utf-8 404.7713ms 
 [19-12-2025 18:44:55 INF] Request starting HTTP/2 GET https://localhost:5001/_framework/aspnetcore-browser-refresh.js - null null 
 [19-12-2025 18:44:55 INF] Request starting HTTP/2 GET https://localhost:5001/_vs/browserLink - null null 
 [19-12-2025 18:44:55 INF] Request finished HTTP/2 GET https://localhost:5001/_framework/aspnetcore-browser-refresh.js - 200 16525 application/javascript; charset=utf-8 55.5617ms 
 [19-12-2025 18:44:55 INF] Request finished HTTP/2 GET https://localhost:5001/_vs/browserLink - 200 null text/javascript; charset=UTF-8 118.875ms 
 [19-12-2025 18:44:55 INF] Request starting HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - null null 
 [19-12-2025 18:44:55 INF] Request finished HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 47.7877ms 
 [19-12-2025 18:45:46 INF] Request starting HTTP/2 POST https://localhost:5001/api/Users/SignUpUserReader - application/json 308 
 [19-12-2025 18:45:46 INF] CORS policy execution failed. 
 [19-12-2025 18:45:46 INF] Request origin https://localhost:5001 does not have permission to access the resource. 
 [19-12-2025 18:45:46 INF] Executing endpoint 'LibraryManagementApp.Controllers.UsersController.SignUpUserReader (LibraryManagementApp)' 
 [19-12-2025 18:45:46 INF] Route matched with {action = "SignUpUserReader", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[LibraryManagementApp.DTO.UserReadOnlyDTO]] SignUpUserReader(LibraryManagementApp.DTO.ReaderSignupDTO) on controller LibraryManagementApp.Controllers.UsersController (LibraryManagementApp). 
 [19-12-2025 18:45:46 WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license. 
 [19-12-2025 18:45:49 INF] Executed DbCommand (111ms) [Parameters=[@__username_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[DeletedAt], [u].[Email], [u].[Firstname], [u].[InsertedAt], [u].[IsDeleted], [u].[Lastname], [u].[ModifiedAt], [u].[Password], [u].[UserRole], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__username_0 
 [19-12-2025 18:45:51 INF] Executed DbCommand (19ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 100), @p2='?' (Size = 255), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Boolean), @p5='?' (Size = 255), @p6='?' (Size = 60), @p7='?' (Size = 20), @p8='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([DeletedAt], [Email], [Firstname], [InsertedAt], [IsDeleted], [Lastname], [Password], [UserRole], [Username])
OUTPUT INSERTED.[Id], INSERTED.[ModifiedAt]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8); 
 [19-12-2025 18:45:51 INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 500), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (Size = 100), @p4='?' (Size = 255), @p5='?' (DbType = DateTime2), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = DateTime2), @p10='?' (Size = 20), @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Readers] ([Address], [BooksBorrowedCount], [DeletedAt], [Email], [FullName], [InsertedAt], [IsActive], [IsDeleted], [LibrarianId], [MembershipDate], [PhoneNumber], [UserId])
OUTPUT INSERTED.[Id], INSERTED.[ModifiedAt]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11); 
 [19-12-2025 18:45:51 ERR] An exception occurred in the database while saving changes for context type 'LibraryManagementApp.Data.LibraryAppDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Email', table 'LibraryApiDev.dbo.Readers'; column does not allow nulls. INSERT fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:b2522b43-5e5e-4ad2-bafb-a318c15e7775
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken) 
 Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Email', table 'LibraryApiDev.dbo.Readers'; column does not allow nulls. INSERT fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:b2522b43-5e5e-4ad2-bafb-a318c15e7775
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
[19-12-2025 18:45:52 INF] Executed action LibraryManagementApp.Controllers.UsersController.SignUpUserReader (LibraryManagementApp) in 5694.3622ms 
 [19-12-2025 18:45:52 INF] Executed endpoint 'LibraryManagementApp.Controllers.UsersController.SignUpUserReader (LibraryManagementApp)' 
 [19-12-2025 18:45:52 ERR] DbUpdateException at /api/Users/SignUpUserReader POST by Anonymous | Trace=0HNHV3NNNAJV3:00000001 
 [19-12-2025 18:45:52 INF] Request finished HTTP/2 POST https://localhost:5001/api/Users/SignUpUserReader - 500 null application/json 6223.9198ms 
 [19-12-2025 18:47:06 INF] User profile is available. Using 'C:\Users\irene\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest. 
 [19-12-2025 18:47:07 INF] Now listening on: https://localhost:5001 
 [19-12-2025 18:47:07 INF] Now listening on: http://localhost:5000 
 [19-12-2025 18:47:07 INF] Application started. Press Ctrl+C to shut down. 
 [19-12-2025 18:47:07 INF] Hosting environment: Development 
 [19-12-2025 18:47:07 INF] Content root path: C:\Users\irene\source\repos\LibraryManagementApp\LibraryManagementApp 
 [19-12-2025 18:47:08 INF] Request starting HTTP/2 GET https://localhost:5001/swagger/index.html - null null 
 [19-12-2025 18:47:09 INF] Request finished HTTP/2 GET https://localhost:5001/swagger/index.html - 200 null text/html;charset=utf-8 379.1316ms 
 [19-12-2025 18:47:09 INF] Request starting HTTP/2 GET https://localhost:5001/_framework/aspnetcore-browser-refresh.js - null null 
 [19-12-2025 18:47:09 INF] Request starting HTTP/2 GET https://localhost:5001/_vs/browserLink - null null 
 [19-12-2025 18:47:09 INF] Request finished HTTP/2 GET https://localhost:5001/_framework/aspnetcore-browser-refresh.js - 200 16525 application/javascript; charset=utf-8 15.513ms 
 [19-12-2025 18:47:09 INF] Request finished HTTP/2 GET https://localhost:5001/_vs/browserLink - 200 null text/javascript; charset=UTF-8 84.7045ms 
 [19-12-2025 18:47:09 INF] Request starting HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - null null 
 [19-12-2025 18:47:09 INF] Request finished HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 39.204ms 
 [19-12-2025 18:47:56 INF] Request starting HTTP/2 POST https://localhost:5001/api/Users/SignUpUserReader - application/json 296 
 [19-12-2025 18:47:56 INF] CORS policy execution failed. 
 [19-12-2025 18:47:56 INF] Request origin https://localhost:5001 does not have permission to access the resource. 
 [19-12-2025 18:47:56 INF] Executing endpoint 'LibraryManagementApp.Controllers.UsersController.SignUpUserReader (LibraryManagementApp)' 
 [19-12-2025 18:47:56 INF] Route matched with {action = "SignUpUserReader", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[LibraryManagementApp.DTO.UserReadOnlyDTO]] SignUpUserReader(LibraryManagementApp.DTO.ReaderSignupDTO) on controller LibraryManagementApp.Controllers.UsersController (LibraryManagementApp). 
 [19-12-2025 18:47:56 WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license. 
 [19-12-2025 18:48:00 INF] Executed DbCommand (122ms) [Parameters=[@__username_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[DeletedAt], [u].[Email], [u].[Firstname], [u].[InsertedAt], [u].[IsDeleted], [u].[Lastname], [u].[ModifiedAt], [u].[Password], [u].[UserRole], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__username_0 
 [19-12-2025 18:48:01 INF] Executed DbCommand (31ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 100), @p2='?' (Size = 255), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Boolean), @p5='?' (Size = 255), @p6='?' (Size = 60), @p7='?' (Size = 20), @p8='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([DeletedAt], [Email], [Firstname], [InsertedAt], [IsDeleted], [Lastname], [Password], [UserRole], [Username])
OUTPUT INSERTED.[Id], INSERTED.[ModifiedAt]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8); 
 [19-12-2025 18:48:02 INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (Size = 500), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (Size = 100), @p4='?' (Size = 255), @p5='?' (DbType = DateTime2), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = DateTime2), @p10='?' (Size = 20), @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Readers] ([Address], [BooksBorrowedCount], [DeletedAt], [Email], [FullName], [InsertedAt], [IsActive], [IsDeleted], [LibrarianId], [MembershipDate], [PhoneNumber], [UserId])
OUTPUT INSERTED.[Id], INSERTED.[ModifiedAt]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11); 
 [19-12-2025 18:48:02 ERR] An exception occurred in the database while saving changes for context type 'LibraryManagementApp.Data.LibraryAppDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Email', table 'LibraryApiDev.dbo.Readers'; column does not allow nulls. INSERT fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:77944c03-9f67-43e4-9cae-17503e32d790
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken) 
 Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Email', table 'LibraryApiDev.dbo.Readers'; column does not allow nulls. INSERT fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:77944c03-9f67-43e4-9cae-17503e32d790
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
[19-12-2025 18:48:02 INF] Executed action LibraryManagementApp.Controllers.UsersController.SignUpUserReader (LibraryManagementApp) in 6423.5892ms 
 [19-12-2025 18:48:02 INF] Executed endpoint 'LibraryManagementApp.Controllers.UsersController.SignUpUserReader (LibraryManagementApp)' 
 [19-12-2025 18:48:02 ERR] DbUpdateException at /api/Users/SignUpUserReader POST by Anonymous | Trace=0HNHV3OVIA7A0:00000001 
 [19-12-2025 18:48:02 INF] Request finished HTTP/2 POST https://localhost:5001/api/Users/SignUpUserReader - 500 null application/json 6972.1399ms 
 [19-12-2025 18:49:42 INF] Request starting HTTP/2 POST https://localhost:5001/api/Users/SignUpUserReader - application/json 296 
 [19-12-2025 18:49:42 INF] CORS policy execution failed. 
 [19-12-2025 18:49:42 INF] Request origin https://localhost:5001 does not have permission to access the resource. 
 [19-12-2025 18:49:42 INF] Executing endpoint 'LibraryManagementApp.Controllers.UsersController.SignUpUserReader (LibraryManagementApp)' 
 [19-12-2025 18:49:42 INF] Route matched with {action = "SignUpUserReader", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[LibraryManagementApp.DTO.UserReadOnlyDTO]] SignUpUserReader(LibraryManagementApp.DTO.ReaderSignupDTO) on controller LibraryManagementApp.Controllers.UsersController (LibraryManagementApp). 
 [19-12-2025 18:49:42 INF] Executed DbCommand (8ms) [Parameters=[@__username_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[DeletedAt], [u].[Email], [u].[Firstname], [u].[InsertedAt], [u].[IsDeleted], [u].[Lastname], [u].[ModifiedAt], [u].[Password], [u].[UserRole], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__username_0 
 [19-12-2025 18:49:43 INF] Executed action LibraryManagementApp.Controllers.UsersController.SignUpUserReader (LibraryManagementApp) in 316.968ms 
 [19-12-2025 18:49:43 INF] Executed endpoint 'LibraryManagementApp.Controllers.UsersController.SignUpUserReader (LibraryManagementApp)' 
 [19-12-2025 18:49:43 ERR] EntityAlreadyExistsException at /api/Users/SignUpUserReader POST by Anonymous | Trace=0HNHV3OVIA7A0:00000003 
 [19-12-2025 18:49:43 INF] Request finished HTTP/2 POST https://localhost:5001/api/Users/SignUpUserReader - 400 null application/json 515.7494ms 
 [19-12-2025 18:52:49 INF] User profile is available. Using 'C:\Users\irene\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest. 
 [19-12-2025 18:52:49 INF] Now listening on: https://localhost:5001 
 [19-12-2025 18:52:49 INF] Now listening on: http://localhost:5000 
 [19-12-2025 18:52:49 INF] Application started. Press Ctrl+C to shut down. 
 [19-12-2025 18:52:49 INF] Hosting environment: Development 
 [19-12-2025 18:52:49 INF] Content root path: C:\Users\irene\source\repos\LibraryManagementApp\LibraryManagementApp 
 [19-12-2025 18:52:50 INF] Request starting HTTP/2 GET https://localhost:5001/swagger/index.html - null null 
 [19-12-2025 18:52:51 INF] Request finished HTTP/2 GET https://localhost:5001/swagger/index.html - 200 null text/html;charset=utf-8 493.8444ms 
 [19-12-2025 18:52:51 INF] Request starting HTTP/2 GET https://localhost:5001/_vs/browserLink - null null 
 [19-12-2025 18:52:51 INF] Request starting HTTP/2 GET https://localhost:5001/_framework/aspnetcore-browser-refresh.js - null null 
 [19-12-2025 18:52:51 INF] Request finished HTTP/2 GET https://localhost:5001/_framework/aspnetcore-browser-refresh.js - 200 16525 application/javascript; charset=utf-8 37.506ms 
 [19-12-2025 18:52:51 INF] Request finished HTTP/2 GET https://localhost:5001/_vs/browserLink - 200 null text/javascript; charset=UTF-8 89.7752ms 
 [19-12-2025 18:52:51 INF] Request starting HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - null null 
 [19-12-2025 18:52:51 INF] Request finished HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 37.0869ms 
 [19-12-2025 18:53:58 INF] Request starting HTTP/2 POST https://localhost:5001/api/Users/SignUpUserReader - application/json 218 
 [19-12-2025 18:53:58 INF] CORS policy execution failed. 
 [19-12-2025 18:53:58 INF] Request origin https://localhost:5001 does not have permission to access the resource. 
 [19-12-2025 18:53:59 INF] Executing endpoint 'LibraryManagementApp.Controllers.UsersController.SignUpUserReader (LibraryManagementApp)' 
 [19-12-2025 18:53:59 INF] Route matched with {action = "SignUpUserReader", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[LibraryManagementApp.DTO.UserReadOnlyDTO]] SignUpUserReader(LibraryManagementApp.DTO.ReaderSignupDTO) on controller LibraryManagementApp.Controllers.UsersController (LibraryManagementApp). 
 [19-12-2025 18:53:59 WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license. 
 [19-12-2025 18:54:02 INF] Executed DbCommand (99ms) [Parameters=[@__username_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[DeletedAt], [u].[Email], [u].[Firstname], [u].[InsertedAt], [u].[IsDeleted], [u].[Lastname], [u].[ModifiedAt], [u].[Password], [u].[UserRole], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__username_0 
 [19-12-2025 18:54:04 INF] Executed DbCommand (31ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 100), @p2='?' (Size = 255), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Boolean), @p5='?' (Size = 255), @p6='?' (Size = 60), @p7='?' (Size = 20), @p8='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([DeletedAt], [Email], [Firstname], [InsertedAt], [IsDeleted], [Lastname], [Password], [UserRole], [Username])
OUTPUT INSERTED.[Id], INSERTED.[ModifiedAt]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8); 
 [19-12-2025 18:54:04 INF] Executing CreatedAtActionResult, writing value of type 'LibraryManagementApp.DTO.UserReadOnlyDTO'. 
 [19-12-2025 18:54:04 INF] Executed action LibraryManagementApp.Controllers.UsersController.SignUpUserReader (LibraryManagementApp) in 5096.8001ms 
 [19-12-2025 18:54:04 INF] Executed endpoint 'LibraryManagementApp.Controllers.UsersController.SignUpUserReader (LibraryManagementApp)' 
 [19-12-2025 18:54:04 INF] Request finished HTTP/2 POST https://localhost:5001/api/Users/SignUpUserReader - 201 110 application/json; charset=utf-8 5402.4385ms 
 [19-12-2025 18:57:19 INF] Request starting HTTP/2 POST https://localhost:5001/api/Users/LoginUser - application/json 125 
 [19-12-2025 18:57:19 INF] CORS policy execution failed. 
 [19-12-2025 18:57:19 INF] Request origin https://localhost:5001 does not have permission to access the resource. 
 [19-12-2025 18:57:19 INF] Executing endpoint 'LibraryManagementApp.Controllers.UsersController.LoginUserAsync (LibraryManagementApp)' 
 [19-12-2025 18:57:19 INF] Route matched with {action = "LoginUser", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[LibraryManagementApp.DTO.JwtTokenDTO]] LoginUserAsync(LibraryManagementApp.DTO.UserLoginDTO) on controller LibraryManagementApp.Controllers.UsersController (LibraryManagementApp). 
 [19-12-2025 18:57:19 INF] Executed DbCommand (6ms) [Parameters=[@__username_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[DeletedAt], [u].[Email], [u].[Firstname], [u].[InsertedAt], [u].[IsDeleted], [u].[Lastname], [u].[ModifiedAt], [u].[Password], [u].[UserRole], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__username_0 
 [19-12-2025 18:57:20 ERR] Authorization failed for user with username: ivi. Bad Credentials 
 [19-12-2025 18:57:20 INF] Executed action LibraryManagementApp.Controllers.UsersController.LoginUserAsync (LibraryManagementApp) in 947.0087ms 
 [19-12-2025 18:57:20 INF] Executed endpoint 'LibraryManagementApp.Controllers.UsersController.LoginUserAsync (LibraryManagementApp)' 
 [19-12-2025 18:57:20 ERR] EntityNotAuthorizedException at /api/Users/LoginUser POST by Anonymous | Trace=0HNHV3S5J4BCJ:00000003 
 [19-12-2025 18:57:20 INF] Request finished HTTP/2 POST https://localhost:5001/api/Users/LoginUser - 401 null application/json 1191.1517ms 
 [19-12-2025 18:58:07 INF] Request starting HTTP/2 POST https://localhost:5001/api/Users/LoginUser - application/json 75 
 [19-12-2025 18:58:07 INF] CORS policy execution failed. 
 [19-12-2025 18:58:07 INF] Request origin https://localhost:5001 does not have permission to access the resource. 
 [19-12-2025 18:58:07 INF] Executing endpoint 'LibraryManagementApp.Controllers.UsersController.LoginUserAsync (LibraryManagementApp)' 
 [19-12-2025 18:58:07 INF] Route matched with {action = "LoginUser", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[LibraryManagementApp.DTO.JwtTokenDTO]] LoginUserAsync(LibraryManagementApp.DTO.UserLoginDTO) on controller LibraryManagementApp.Controllers.UsersController (LibraryManagementApp). 
 [19-12-2025 18:58:07 INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'. 
 [19-12-2025 18:58:07 INF] Executed action LibraryManagementApp.Controllers.UsersController.LoginUserAsync (LibraryManagementApp) in 90.09ms 
 [19-12-2025 18:58:07 INF] Executed endpoint 'LibraryManagementApp.Controllers.UsersController.LoginUserAsync (LibraryManagementApp)' 
 [19-12-2025 18:58:07 INF] Request finished HTTP/2 POST https://localhost:5001/api/Users/LoginUser - 400 316 application/problem+json; charset=utf-8 163.4305ms 
 [19-12-2025 18:59:02 INF] Request starting HTTP/2 POST https://localhost:5001/api/Users/LoginUser - application/json 126 
 [19-12-2025 18:59:02 INF] CORS policy execution failed. 
 [19-12-2025 18:59:02 INF] Request origin https://localhost:5001 does not have permission to access the resource. 
 [19-12-2025 18:59:02 INF] Executing endpoint 'LibraryManagementApp.Controllers.UsersController.LoginUserAsync (LibraryManagementApp)' 
 [19-12-2025 18:59:02 INF] Route matched with {action = "LoginUser", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[LibraryManagementApp.DTO.JwtTokenDTO]] LoginUserAsync(LibraryManagementApp.DTO.UserLoginDTO) on controller LibraryManagementApp.Controllers.UsersController (LibraryManagementApp). 
 [19-12-2025 18:59:02 INF] Executed DbCommand (9ms) [Parameters=[@__username_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[DeletedAt], [u].[Email], [u].[Firstname], [u].[InsertedAt], [u].[IsDeleted], [u].[Lastname], [u].[ModifiedAt], [u].[Password], [u].[UserRole], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__username_0 
 [19-12-2025 18:59:03 ERR] Authorization failed for user with username: alex. Bad Credentials 
 [19-12-2025 18:59:03 INF] Executed action LibraryManagementApp.Controllers.UsersController.LoginUserAsync (LibraryManagementApp) in 547.8341ms 
 [19-12-2025 18:59:03 INF] Executed endpoint 'LibraryManagementApp.Controllers.UsersController.LoginUserAsync (LibraryManagementApp)' 
 [19-12-2025 18:59:03 ERR] EntityNotAuthorizedException at /api/Users/LoginUser POST by Anonymous | Trace=0HNHV3S5J4BCJ:00000007 
 [19-12-2025 18:59:03 INF] Request finished HTTP/2 POST https://localhost:5001/api/Users/LoginUser - 401 null application/json 738.9848ms 
 [19-12-2025 19:08:49 INF] Request starting HTTP/2 POST https://localhost:5001/api/Users/SignUpUserReader - application/json 215 
 [19-12-2025 19:08:49 INF] CORS policy execution failed. 
 [19-12-2025 19:08:49 INF] Request origin https://localhost:5001 does not have permission to access the resource. 
 [19-12-2025 19:08:49 INF] Executing endpoint 'LibraryManagementApp.Controllers.UsersController.SignUpUserReader (LibraryManagementApp)' 
 [19-12-2025 19:08:49 INF] Route matched with {action = "SignUpUserReader", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[LibraryManagementApp.DTO.UserReadOnlyDTO]] SignUpUserReader(LibraryManagementApp.DTO.ReaderSignupDTO) on controller LibraryManagementApp.Controllers.UsersController (LibraryManagementApp). 
 [19-12-2025 19:08:49 INF] Executed DbCommand (15ms) [Parameters=[@__username_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[DeletedAt], [u].[Email], [u].[Firstname], [u].[InsertedAt], [u].[IsDeleted], [u].[Lastname], [u].[ModifiedAt], [u].[Password], [u].[UserRole], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__username_0 
 [19-12-2025 19:08:49 INF] Executed DbCommand (16ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 100), @p2='?' (Size = 255), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Boolean), @p5='?' (Size = 255), @p6='?' (Size = 60), @p7='?' (Size = 20), @p8='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([DeletedAt], [Email], [Firstname], [InsertedAt], [IsDeleted], [Lastname], [Password], [UserRole], [Username])
OUTPUT INSERTED.[Id], INSERTED.[ModifiedAt]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8); 
 [19-12-2025 19:08:49 INF] Executing CreatedAtActionResult, writing value of type 'LibraryManagementApp.DTO.UserReadOnlyDTO'. 
 [19-12-2025 19:08:49 INF] Executed action LibraryManagementApp.Controllers.UsersController.SignUpUserReader (LibraryManagementApp) in 455.7988ms 
 [19-12-2025 19:08:49 INF] Executed endpoint 'LibraryManagementApp.Controllers.UsersController.SignUpUserReader (LibraryManagementApp)' 
 [19-12-2025 19:08:49 INF] Request finished HTTP/2 POST https://localhost:5001/api/Users/SignUpUserReader - 201 122 application/json; charset=utf-8 497.1542ms 
 [19-12-2025 19:09:50 INF] Request starting HTTP/2 POST https://localhost:5001/api/Users/LoginUser - application/json 82 
 [19-12-2025 19:09:50 INF] CORS policy execution failed. 
 [19-12-2025 19:09:50 INF] Request origin https://localhost:5001 does not have permission to access the resource. 
 [19-12-2025 19:09:51 INF] Executing endpoint 'LibraryManagementApp.Controllers.UsersController.LoginUserAsync (LibraryManagementApp)' 
 [19-12-2025 19:09:51 INF] Route matched with {action = "LoginUser", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[LibraryManagementApp.DTO.JwtTokenDTO]] LoginUserAsync(LibraryManagementApp.DTO.UserLoginDTO) on controller LibraryManagementApp.Controllers.UsersController (LibraryManagementApp). 
 [19-12-2025 19:09:51 INF] Executed DbCommand (6ms) [Parameters=[@__username_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[DeletedAt], [u].[Email], [u].[Firstname], [u].[InsertedAt], [u].[IsDeleted], [u].[Lastname], [u].[ModifiedAt], [u].[Password], [u].[UserRole], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__username_0 
 [19-12-2025 19:09:51 INF] User with username: eirini2 found. 
 [19-12-2025 19:09:51 INF] Executing OkObjectResult, writing value of type 'LibraryManagementApp.DTO.JwtTokenDTO'. 
 [19-12-2025 19:09:51 INF] Executed action LibraryManagementApp.Controllers.UsersController.LoginUserAsync (LibraryManagementApp) in 493.7911ms 
 [19-12-2025 19:09:51 INF] Executed endpoint 'LibraryManagementApp.Controllers.UsersController.LoginUserAsync (LibraryManagementApp)' 
 [19-12-2025 19:09:51 INF] Request finished HTTP/2 POST https://localhost:5001/api/Users/LoginUser - 200 611 application/json; charset=utf-8 542.5649ms 
 [19-12-2025 19:14:03 INF] Request starting HTTP/2 POST https://localhost:5001/api/Users/SignUpUserReader - application/json 217 
 [19-12-2025 19:14:03 INF] CORS policy execution failed. 
 [19-12-2025 19:14:03 INF] Request origin https://localhost:5001 does not have permission to access the resource. 
 [19-12-2025 19:14:03 INF] Executing endpoint 'LibraryManagementApp.Controllers.UsersController.SignUpUserReader (LibraryManagementApp)' 
 [19-12-2025 19:14:03 INF] Route matched with {action = "SignUpUserReader", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[LibraryManagementApp.DTO.UserReadOnlyDTO]] SignUpUserReader(LibraryManagementApp.DTO.ReaderSignupDTO) on controller LibraryManagementApp.Controllers.UsersController (LibraryManagementApp). 
 [19-12-2025 19:14:03 INF] Executed DbCommand (5ms) [Parameters=[@__username_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[DeletedAt], [u].[Email], [u].[Firstname], [u].[InsertedAt], [u].[IsDeleted], [u].[Lastname], [u].[ModifiedAt], [u].[Password], [u].[UserRole], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__username_0 
 [19-12-2025 19:14:03 INF] Executed DbCommand (16ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 100), @p2='?' (Size = 255), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Boolean), @p5='?' (Size = 255), @p6='?' (Size = 60), @p7='?' (Size = 20), @p8='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([DeletedAt], [Email], [Firstname], [InsertedAt], [IsDeleted], [Lastname], [Password], [UserRole], [Username])
OUTPUT INSERTED.[Id], INSERTED.[ModifiedAt]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8); 
 [19-12-2025 19:14:03 INF] Executing CreatedAtActionResult, writing value of type 'LibraryManagementApp.DTO.UserReadOnlyDTO'. 
 [19-12-2025 19:14:03 INF] Executed action LibraryManagementApp.Controllers.UsersController.SignUpUserReader (LibraryManagementApp) in 398.5045ms 
 [19-12-2025 19:14:03 INF] Executed endpoint 'LibraryManagementApp.Controllers.UsersController.SignUpUserReader (LibraryManagementApp)' 
 [19-12-2025 19:14:03 INF] Request finished HTTP/2 POST https://localhost:5001/api/Users/SignUpUserReader - 201 124 application/json; charset=utf-8 452.9628ms 
 [19-12-2025 19:19:09 INF] User profile is available. Using 'C:\Users\irene\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest. 
 [19-12-2025 19:19:10 INF] Now listening on: https://localhost:5001 
 [19-12-2025 19:19:10 INF] Now listening on: http://localhost:5000 
 [19-12-2025 19:19:10 INF] Application started. Press Ctrl+C to shut down. 
 [19-12-2025 19:19:10 INF] Hosting environment: Development 
 [19-12-2025 19:19:10 INF] Content root path: C:\Users\irene\source\repos\LibraryManagementApp\LibraryManagementApp 
 [19-12-2025 19:19:10 INF] Request starting HTTP/2 GET https://localhost:5001/swagger/index.html - null null 
 [19-12-2025 19:19:11 INF] Request finished HTTP/2 GET https://localhost:5001/swagger/index.html - 200 null text/html;charset=utf-8 472.7834ms 
 [19-12-2025 19:19:11 INF] Request starting HTTP/2 GET https://localhost:5001/_vs/browserLink - null null 
 [19-12-2025 19:19:11 INF] Request starting HTTP/2 GET https://localhost:5001/_framework/aspnetcore-browser-refresh.js - null null 
 [19-12-2025 19:19:11 INF] Request finished HTTP/2 GET https://localhost:5001/_framework/aspnetcore-browser-refresh.js - 200 16525 application/javascript; charset=utf-8 89.776ms 
 [19-12-2025 19:19:11 INF] Request finished HTTP/2 GET https://localhost:5001/_vs/browserLink - 200 null text/javascript; charset=UTF-8 147.8877ms 
 [19-12-2025 19:19:11 INF] Request starting HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - null null 
 [19-12-2025 19:19:11 INF] Request finished HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 32.9314ms 
 [19-12-2025 19:20:24 INF] Request starting HTTP/2 POST https://localhost:5001/api/Users/SignUpUserReader - application/json 206 
 [19-12-2025 19:20:24 INF] CORS policy execution failed. 
 [19-12-2025 19:20:24 INF] Request origin https://localhost:5001 does not have permission to access the resource. 
 [19-12-2025 19:20:24 INF] Executing endpoint 'LibraryManagementApp.Controllers.UsersController.SignUpUserReader (LibraryManagementApp)' 
 [19-12-2025 19:20:24 INF] Route matched with {action = "SignUpUserReader", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[LibraryManagementApp.DTO.UserReadOnlyDTO]] SignUpUserReader(LibraryManagementApp.DTO.ReaderSignupDTO) on controller LibraryManagementApp.Controllers.UsersController (LibraryManagementApp). 
 [19-12-2025 19:20:24 WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license. 
 [19-12-2025 19:20:28 INF] Executed DbCommand (99ms) [Parameters=[@__username_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[DeletedAt], [u].[Email], [u].[Firstname], [u].[InsertedAt], [u].[IsDeleted], [u].[Lastname], [u].[ModifiedAt], [u].[Password], [u].[UserRole], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__username_0 
 [19-12-2025 19:20:29 INF] Executed DbCommand (21ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 100), @p2='?' (Size = 255), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Boolean), @p5='?' (Size = 255), @p6='?' (Size = 60), @p7='?' (Size = 20), @p8='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([DeletedAt], [Email], [Firstname], [InsertedAt], [IsDeleted], [Lastname], [Password], [UserRole], [Username])
OUTPUT INSERTED.[Id], INSERTED.[ModifiedAt]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8); 
 [19-12-2025 19:20:29 INF] Executing CreatedAtActionResult, writing value of type 'LibraryManagementApp.DTO.UserReadOnlyDTO'. 
 [19-12-2025 19:20:29 INF] Executed action LibraryManagementApp.Controllers.UsersController.SignUpUserReader (LibraryManagementApp) in 5085.6748ms 
 [19-12-2025 19:20:29 INF] Executed endpoint 'LibraryManagementApp.Controllers.UsersController.SignUpUserReader (LibraryManagementApp)' 
 [19-12-2025 19:20:29 INF] Request finished HTTP/2 POST https://localhost:5001/api/Users/SignUpUserReader - 201 118 application/json; charset=utf-8 5330.3102ms 
 